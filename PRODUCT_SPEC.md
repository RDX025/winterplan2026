# 剑客游学 - Product Specification (产品规格书)

**版本：** 2.0  
**日期：** 2026-02-07  
**作者：** Fox7 Team  
**状态：** Draft

---

## 1. 产品愿景 (Product Vision)

### 1.1 愿景声明
打造一款将教育与游戏化完美结合的寒假学习管理系统，通过武侠主题的沉浸式体验，帮助初中生在14天内建立良好的学习习惯，提升数学、英语能力，并发现自己的兴趣方向。

### 1.2 目标用户
- **主要用户：** 初中生（12-15岁）
- **次要用户：** 家长（监督学习进度）
- **使用场景：** 寒假在家自主学习

### 1.3 核心价值主张
- ✅ **游戏化驱动：** 将枯燥的学习转化为武侠江湖冒险
- ✅ **数据驱动：** 实时追踪学习进度，可视化成长曲线
- ✅ **兴趣发现：** 通过每日选择分析学生潜在兴趣方向
- ✅ **习惯养成：** 14天持续打卡，建立长期良好习惯
- ✅ **实物奖励：** 3D打印武器模型作为里程碑激励

---

## 2. 产品目标 (Product Goals)

### 2.1 业务目标
1. **用户留存率：** 14天完成率 ≥ 80%
2. **每日活跃度：** 日均打卡率 ≥ 90%
3. **家长满意度：** NPS ≥ 8/10
4. **学习时长：** 日均有效学习时间 ≥ 4小时

### 2.2 用户目标
1. 完成14天寒假学习计划
2. 数学、英语成绩提升 10-20%
3. 养成至少3个良好习惯
4. 发现并明确1-2个兴趣方向
5. 解锁至少5个3D打印奖励

---

## 3. 功能需求 (Functional Requirements)

### 3.1 核心功能模块

#### 📊 Module 1: 每日仪表盘 (Daily Dashboard)
**优先级：** P0 (Must Have)

**功能描述：**
- 显示当前是第几天（1/14天）
- 实时展示三大进度条：
  - 🔥 内功(数学) - 百分比进度
  - 💬 暗语(英语) - 百分比进度
  - 🎭 武德修养(习惯) - 百分比进度
- 每日进度自动计算并同步到数据库

**用户故事：**
```
作为学生，我希望看到今天的学习进度，
这样我可以知道还有哪些任务未完成。
```

**验收标准：**
- [ ] 进度条实时更新，无延迟
- [ ] 数据从 Supabase 实时读取
- [ ] 进度百分比精确到个位数
- [ ] 支持离线查看（缓存昨日数据）

---

#### ⏰ Module 2: 课程时间线 (Course Timeline)
**优先级：** P0 (Must Have)

**功能描述：**
- 展示每日5个时间段的学习计划
- 状态区分：
  - ✅ 已完成（绿色）
  - ⏳ 进行中（黄色脉冲动画）
  - 🔒 未开始（灰色锁定）
- 点击任意时间段可手动打卡
- 打卡后状态立即更新并同步数据库

**用户故事：**
```
作为学生，我希望点击课程时间线来标记完成，
这样我可以清晰记录今天的学习轨迹。
```

**验收标准：**
- [ ] 时间线按时间顺序排列（08:00 → 19:00）
- [ ] 点击后弹出确认框："确认完成【数学课】吗？"
- [ ] 打卡成功后显示 Toast 提示
- [ ] 数据写入 Supabase 的 `course_timeline` 表
- [ ] 支持撤销打卡（24小时内）

---

#### 🥋 Module 3: 习惯打卡系统 (Habit Tracker)
**优先级：** P0 (Must Have)

**功能描述：**
- 6个每日习惯追踪：
  1. 🌅 早起（7:30前）
  2. 🎹 练琴30分钟
  3. 🏃 运动30分钟
  4. 📖 阅读30分钟
  5. 🌙 早睡（22:00前）
  6. 📝 数学复习
- 点击卡片切换打卡状态
- 自动计算"武德修养"进度：`完成数 / 6 * 100%`
- 每日零点自动重置

**用户故事：**
```
作为学生，我希望轻松打卡每日习惯，
这样我可以看到自己的坚持成果。
```

**验收标准：**
- [ ] 点击卡片立即切换勾选状态（✅ ⬜）
- [ ] 打卡时间戳记录到数据库
- [ ] 习惯完成度实时更新到进度条
- [ ] 每日零点自动清空今日打卡（保留历史）
- [ ] 支持查看历史打卡记录（日历视图）

---

#### 🎲 Module 4: 每日兴趣探索 (Daily Interest Choice)
**优先级：** P0 (Must Have)

**功能描述：**
- 课后时间展示4个兴趣选项：
  - 🖨️ 打印历史名剑（工程制造）
  - 🎹 学一首古风曲（音乐表达）
  - 📚 读三国故事（历史人文）
  - 🧩 数学解谜挑战（逻辑推理）
- 点击后记录选择并增加对应兴趣分数 +5
- 选择记录同步到数据库

**用户故事：**
```
作为学生，我希望每天选择自己感兴趣的活动，
这样系统可以了解我的兴趣方向。
```

**验收标准：**
- [ ] 每天只能选择1次（重复选择覆盖）
- [ ] 选择后卡片高亮显示
- [ ] 兴趣分数写入 `interest_scores` 表
- [ ] 选择记录写入 `daily_choices` 表
- [ ] 雷达图实时更新

---

#### 🔮 Module 5: 兴趣雷达图 (Interest Radar)
**优先级：** P1 (Should Have)

**功能描述：**
- 6维雷达图展示兴趣分布：
  - 📖 历史人文
  - 🔧 工程制造
  - 🎵 音乐表达
  - ⚔️ 体能武术
  - 🧮 逻辑推理
  - 🎨 艺术创造
- Canvas 渲染，支持动画过渡
- 数据从 Supabase 实时读取

**用户故事：**
```
作为学生，我希望看到自己的兴趣雷达图，
这样我可以了解我更偏向哪些领域。
```

**验收标准：**
- [ ] 雷达图平滑渲染，无闪烁
- [ ] 数据变化时有过渡动画（0.3s）
- [ ] 支持点击各维度查看详细说明
- [ ] 每周生成"兴趣报告"PDF

---

#### 🖨️ Module 6: 3D打印奖励系统 (Reward System)
**优先级：** P1 (Should Have)

**功能描述：**
- 展示4个可解锁的3D模型：
  1. ⚔️ 青龙偃月刀（已解锁）
  2. 🔒 方天画戟（完成3天数学）
  3. 🔒 丈八蛇矛（完成5天打卡）
  4. 🔒 诸葛连弩（数学进阶挑战）
- 达成条件后自动解锁 + 弹窗动画
- 已解锁模型显示"下载STL"按钮

**用户故事：**
```
作为学生，我希望完成任务后解锁3D模型，
这样我可以打印出来收藏，激励我继续学习。
```

**验收标准：**
- [ ] 解锁条件实时检测
- [ ] 解锁时播放动画 + 音效
- [ ] STL 文件可直接下载
- [ ] 奖励记录写入 `unlocked_rewards` 表
- [ ] 支持分享解锁成就到社交平台

---

#### 🗺️ Module 7: 城市活动推荐 (City Events)
**优先级：** P2 (Nice to Have)

**功能描述：**
- 根据用户所在城市推荐寒假活动
- 支持切换城市：深圳/广州/北京/上海
- 活动类型：博物馆展览、武术体验、创客工作坊等
- 显示日期、地点、票价

**用户故事：**
```
作为学生，我希望看到附近的有趣活动，
这样我可以在学习之余参加线下活动。
```

**验收标准：**
- [ ] 活动数据从后端API获取
- [ ] 支持按日期筛选
- [ ] 点击"查看详情"跳转到活动页面
- [ ] 支持添加到日历

---

#### 🏆 Module 8: 成就系统 (Achievements)
**优先级：** P1 (Should Have)

**功能描述：**
- 预设15个成就徽章：
  - 🎖️ 初入江湖（完成第1天）
  - 🏆 勤学苦练（连续3天完成所有任务）
  - 🎹 琴剑双修（完成5次钢琴+运动）
  - 📚 博览群书（阅读打卡7天）
  - 🔥 数学大师（数学进度100%）
  - ... 等
- 达成后自动弹窗展示
- 成就墙展示所有已获得/未获得成就

**验收标准：**
- [ ] 成就条件后台自动检测
- [ ] 解锁时有特效动画
- [ ] 数据写入 `achievements` 表
- [ ] 支持查看成就详情和达成时间

---

## 4. 非功能需求 (Non-Functional Requirements)

### 4.1 性能要求
- **页面加载时间：** 首屏 < 2秒
- **API响应时间：** 95% 请求 < 500ms
- **离线支持：** 缓存昨日数据，支持查看但不可编辑

### 4.2 安全要求
- 使用 Supabase RLS（行级安全）
- API 请求需携带有效 token
- 敏感数据（如学生姓名）脱敏处理

### 4.3 兼容性要求
- 浏览器：Chrome 90+, Safari 14+, Firefox 88+
- 设备：iOS 13+, Android 8+
- 屏幕：320px - 1920px 响应式适配

---

## 5. 成功指标 (Success Metrics)

### 5.1 核心KPI
| 指标 | 目标值 | 测量方法 |
|------|--------|----------|
| 14天完成率 | ≥ 80% | 完成用户数 / 注册用户数 |
| 日活跃率 | ≥ 90% | 日登录用户 / 总用户 |
| 平均打卡次数 | ≥ 5次/天 | 总打卡数 / 活跃天数 |
| 习惯养成率 | ≥ 70% | 连续7天打卡用户占比 |

---

**文档版本：** v1.0  
**最后更新：** 2026-02-07 11:00
